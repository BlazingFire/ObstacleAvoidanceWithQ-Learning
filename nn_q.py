





	
print "Percent of succesful episodes: " + str(sum(rList)/num_episodes) + "%"

import tensorflow as tf
import environment
import random
import pickle

class NNQLearn:
    def __init__(self):
        # self.q = {('000', 3): -200, ('001', 2): 1.3688448000000002, ('001', 3): -1, ('011', 0): -200, ('011', 1): 1.439514615462547, ('011', 3): -1, ('013', 2): 1.25088, ('013', 3): -1, ('101', 1): 2.679065244273958, ('102', 0): 10.132161874184142, ('102', 1): -3.0359664320672266, ('110', 2): 4.018539170253948, ('112', 0): 10.065486011535159, ('120', 0): 13.256047836194295, ('120', 3): -1, ('124', 3): -1, ('130', 0): 6.726107313787287, ('134', 3): -1, ('230', 1): 2.377696174702592, ('233', 1): 1, ('234', 2): 1.1280000000000001, ('240', 2): 2.6420461761630785, ('240', 3): -1, ('241', 0): 5.8, ('241', 1): 1.4610560000000001, ('241', 2): -39.072, ('241', 3): -1.0, ('250', 3): -1, ('300', 0): -32.550672559511774, ('300', 1): -51.23436608142651, ('300', 2): -39.773013698064254, ('300', 3): -2.849595821685121, ('301', 0): -8.92648118753527, ('301', 1): -200, ('301', 2): 2.3893151026930846, ('301', 3): -44.46871727363532, ('302', 0): -200, ('302', 1): -96.68494312035226, ('302', 2): -19.74545081537438, ('302', 3): -102.28049089679186, ('310', 0): -34.08158221147085, ('310', 1): -1.305775320192473, ('310', 2): -39.26844389598366, ('310', 3): -40.800000000000004, ('311', 1): 8.227567026246994, ('314', 0): -36.0, ('314', 1): -200, ('314', 2): -39.2, ('314', 3): -1, ('320', 0): 14.925312385666908, ('320', 1): 11.138707541451474, ('320', 2): -36.21489592799109, ('320', 3): 8.006728510058903, ('321', 0): 16.944844712101027, ('323', 2): 8.35278181083769, ('330', 0): 18.47780210506384, ('331', 2): 13.098035032470904, ('332', 1): 5.0763692120618265, ('340', 2): 5.053380411162399, ('341', 0): -29.664930292088222, ('341', 1): 2.0894353108459005, ('341', 2): -32.720265524734934, ('341', 3): 5.68608349286695, ('342', 0): 9.860199119753164, ('343', 1): 1, ('343', 3): -1, ('344', 0): 7.0182813460030244, ('350', 2): 2.1130957917688424, ('352', 0): -200, ('352', 3): -1, ('400', 2): 2.0392642928186104, ('401', 2): 1.1280000000000001, ('402', 1): -39.2, ('403', 0): -34.50145004110211, ('403', 1): -39.63968700946472, ('403', 2): -37.09935918662694, ('403', 3): -37.06611766538929, ('404', 0): -32.9869312, ('404', 1): -200, ('404', 2): 1, ('410', 0): 10.21606333709481, ('411', 1): 7.351022795895854, ('412', 2): 1, ('412', 3): -1, ('414', 2): -38.330691482668115, ('420', 0): 13.61332017096256, ('421', 0): 17.655941044819073, ('421', 1): -34.57059847985121, ('421', 2): 16.389092538053152, ('421', 3): 14.381858531450394, ('422', 0): 21.77882643697856, ('422', 1): -33.77518434125257, ('422', 2): -36.00594750446766, ('422', 3): 7.302517417806977, ('423', 0): 13.531956564032004, ('430', 0): 17.492090457185455, ('431', 2): 11.693750384981687, ('432', 0): 10.783510074080876, ('433', 2): 8.095158928588623, ('434', 1): 6.973022550489537, ('434', 3): -1, ('440', 0): 12.031916319432272, ('440', 1): -31.245876721308342, ('440', 2): 5.798609466036817, ('440', 3): -0.9648565321941334, ('441', 1): 8.841181910913551, ('442', 2): 2.529402254622705, ('450', 0): 7.34862454442251, ('451', 0): 5, ('500', 0): -26.35964187393951, ('500', 1): -34.54361453567722, ('500', 2): 3.014954515723836, ('500', 3): 0.7864370098598382, ('501', 0): 10.108374378873217, ('501', 1): 4.990990110045363, ('501', 2): 5.379916706484224, ('501', 3): -200, ('502', 0): -47.32137281793246, ('502', 1): -94.25069022297237, ('502', 2): -86.91906591515206, ('502', 3): -95.00436147938879, ('503', 0): 3.29226308430124, ('503', 1): -88.18715703939284, ('503', 2): -51.03706879796077, ('503', 3): -53.48655571769582, ('504', 0): 11.130379182490406, ('504', 3): -1, ('510', 0): -2.518527458423832, ('510', 1): 3.9411885781995615, ('510', 2): -34.577323652972446, ('510', 3): -36.9992877429858, ('511', 2): 6.532137278733489, ('512', 1): 6.609611593900218, ('513', 0): 5.89955890502384, ('513', 1): -3.0708318914598416, ('513', 3): -1, ('514', 0): 6.333566975868964, ('514', 1): -36.91811958764138, ('514', 2): 2.2166129056124806, ('514', 3): -200, ('520', 0): 0.8145600327378062, ('520', 1): -5.058870836141194, ('520', 2): 5.938753513587393, ('520', 3): -1, ('521', 0): 21.188675053646296, ('521', 3): -1, ('522', 0): 10.867440177741155, ('522', 1): -200, ('522', 2): 14.126396655066749, ('522', 3): 1.1604462012981211, ('523', 1): 10.888473273456697, ('523', 3): -1, ('530', 2): 6.250554259790082, ('531', 0): 15.536308829846558, ('531', 3): -1, ('532', 1): -6.511575091756469, ('533', 0): 11.747671060882292, ('533', 2): -4.11951048413993, ('534', 1): 9.596662790299929, ('540', 0): -21.920708476711873, ('540', 1): -53.079938021688456, ('540', 2): -5.923181028640416, ('540', 3): -67.44553694529333, ('541', 1): 10.801962498759297, ('541', 3): -1, ('542', 0): 13.352050168258351, ('543', 0): 6.520890539241059, ('544', 0): 7.425258963428173, ('552', 1): 11.142080516929974, ('555', 1): 8.669698272119227, ('555', 3): -1}
        self.q = {}
        with open('q_table_list.pickle', "rb") as file:
            while True:
                try:
                    self.q = pickle.load(file)
                except EOFError:
                    break
        # self.q = {('000', 0): -612.3245654960865, ('000', 1): -648.5555044905217, ('000', 2): -647.1094169439864, ('001', 0): -602.0990887940885, ('001', 1): -561.8399781515312, ('001', 2): -590.265361673601, ('002', 0): -317.6498915933085, ('002', 1): -233.4309875916162, ('002', 2): -284.673982172084, ('003', 2): -87.0716245298334, ('010', 0): -221.13926346033836, ('010', 1): -272.4610905316631, ('010', 2): -226.9469113342837, ('011', 0): -444.1588227546646, ('011', 1): -474.78231696732445, ('011', 2): -454.0766472979249, ('012', 0): -125.90632915711262, ('012', 1): -220.70427241234546, ('012', 2): -192.86315241816123, ('013', 0): 5, ('013', 1): -200, ('013', 2): -200, ('021', 0): -62.11678919517446, ('022', 0): -93.2561963333841, ('022', 1): -107.86687232837815, ('022', 2): -130.01342855528287, ('032', 0): 5, ('032', 1): -200, ('033', 0): -165.88799999999998, ('033', 1): -200, ('033', 2): -169.5113125851974, ('100', 0): -647.0730983933673, ('100', 1): -624.127545901056, ('100', 2): -634.175261160381, ('101', 0): -351.51648610544464, ('101', 1): -321.2542443938388, ('101', 2): -376.23448203294083, ('110', 0): -454.4236884132345, ('110', 1): -490.2946652287033, ('110', 2): -486.34281975296665, ('111', 0): -327.5785825922442, ('111', 1): -372.13030039670065, ('111', 2): -371.8674149827568, ('112', 0): -286.99776827766885, ('112', 1): -309.99785919842594, ('112', 2): -296.95312086120305, ('113', 0): -173.69197024818214, ('113', 1): -184.767471173903, ('113', 2): -162.08090398415484, ('121', 0): -95.65492609389244, ('121', 1): -93.50525075237968, ('121', 2): -61.74452967678606, ('122', 0): -204.3836049590208, ('122', 1): -213.55641916824635, ('122', 2): -218.4892695695475, ('123', 0): -45.57929550939707, ('123', 1): -54.835253898843874, ('123', 2): -68.69076327648493, ('132', 0): -2.2059562481874266, ('132', 1): -13.123167357514886, ('132', 2): 1, ('133', 0): -128.71605440525937, ('133', 1): -119.11241256635373, ('133', 2): -105.38298212827749, ('200', 0): -607.6698974043874, ('200', 1): -596.9405845801355, ('200', 2): -598.0076341322629, ('210', 0): -511.9382410321951, ('210', 1): -511.9630574622583, ('210', 2): -525.8239029672081, ('211', 0): -363.6692698961436, ('211', 1): -409.78465168770686, ('211', 2): -419.0243918783241, ('212', 0): -173.6897846630809, ('212', 1): -156.23672372134183, ('212', 2): -174.32950215798462, ('220', 0): -95.11694623555911, ('220', 1): -110.20740101986436, ('220', 2): -56.36850392458821, ('221', 0): -209.22796569952996, ('221', 1): -203.2742362779481, ('221', 2): -179.30519995001325, ('222', 0): -141.7779576590788, ('222', 1): -206.6567234420405, ('222', 2): -182.82416614084366, ('223', 0): -120.81253347687218, ('223', 1): -117.62626479731335, ('223', 2): -127.91059687644149, ('232', 2): 2.17457341553469, ('233', 0): -112.01058934620326, ('233', 1): -113.05244972507, ('233', 2): -130.41649464796086, ('300', 0): -510.0301693579984, ('300', 1): -642.927035927882, ('300', 2): -526.2627139240226, ('301', 1): -110.49606680481133, ('310', 0): -413.0740827460799, ('310', 1): -322.0244272154413, ('310', 2): -455.43764164354144, ('311', 0): -362.9675860751073, ('311', 1): -276.2448760902905, ('311', 2): -369.4382810755428, ('312', 1): -46.54273646011496, ('312', 2): 1, ('320', 0): -128.01543554559728, ('320', 1): -160.7110106214831, ('320', 2): -195.48286113827777, ('321', 0): -186.02659178797825, ('321', 1): -232.85198884408476, ('321', 2): -260.40185933022656, ('322', 0): -172.9935583103572, ('322', 1): -185.35356705019788, ('322', 2): -205.62860908094805, ('323', 0): -39.08741939268084, ('323', 1): -43.37392466509829, ('323', 2): -32.00587006112534, ('330', 0): -121.48924234674607, ('330', 1): -249.94482948152728, ('330', 2): -205.83915793957217, ('331', 0): -111.0233748838147, ('331', 1): -130.13817635445494, ('331', 2): -139.25633783992987, ('332', 0): -76.28796710735348, ('332', 1): -121.86505566588703, ('332', 2): -124.57582421928579, ('333', 0): -185.509130190517, ('333', 1): -152.72478294447976, ('333', 2): -133.33987013955831, ('003', 0): -362.89584728215124, ('003', 1): -341.31488951578325, ('021', 1): -29.537959461808, ('021', 2): -15.871182370776015, ('023', 0): -62.62936998184792, ('023', 1): -115.36378533033651, ('023', 2): -74.95972722788035, ('031', 0): 5, ('032', 2): -113.5943228716784, ('120', 2): 1, ('131', 0): 5, ('201', 0): 2.443092153031169, ('202', 2): 1.1600000000000001, ('213', 0): 6.847334865004312, ('230', 1): 1, ('231', 0): -14.977885965688866, ('231', 1): -15.538361834624322, ('231', 2): -30.296977370744408, ('232', 0): -80.5917168667784, ('232', 1): -80.17580208518424, ('301', 0): -200, ('302', 1): -52.79903462693368, ('302', 2): 1}

        # self.q = {('000', 0): -412.84679287587295,('000', 1): -175.13166796662907,('000', 2): -356.63148875272316,('001', 0): -276.9174974050242,('001', 1): -261.4933060464523,('001', 2): -235.1488473570302,('002', 0): -200,('002', 1): -5.362798806861347,('002', 2): -5.73170809184741,('003', 0): -35.2,('003', 2): -40.058047809097815,('010', 0): -132.8102883731235,('010', 1): -200,('010', 2): -152.44044707406655,('011', 0): -223.39989237390665,('011', 1): -133.35549996127767,('011', 2): -259.0868617083848,('012', 0): -14.5695750067851,('013', 0): 5,('013', 2): -48.32609520075582,('022', 0): -76.05084068602541,('022', 1): -57.05607148451814,('022', 2): -79.82608495760562,('033', 0): 8.458545727982479,('033', 1): -38.86165795664843,('033', 2): -3.844653815242098,('100', 0): -316.34953234009276,('100', 1): -200.29962703425565,('100', 2): -293.07233737395217,('101', 0): -197.68516809325325,('101', 1): -236.80102686603965,('101', 2): -231.3765159694882,('110', 0): -179.1321971854356,('110', 1): -154.4356427873884,('110', 2): -180.5362143347737,('111', 0): -37.09065952399467,('111', 1): -47.19343751425294,('111', 2): -91.69100425373807,('112', 0): -10.351299110717243,('112', 1): -11.798588750563635,('112', 2): -12.6882910901771,('113', 0): -15.547502050110069,('113', 1): -29.92319777889832,('113', 2): -35.45221796007109,('120', 2): 1,('121', 0): -14.824964937415668,('121', 1): -15.307249775444719,('121', 2): -11.589178297105825,('122', 0): -10.390497463704296,('122', 1): -121.01992456995043,('122', 2): -7.937154434990462,('123', 0): -6.883074391541376,('123', 1): -8.404656502262991,('123', 2): -15.943035648298672,('133', 0): 1.2571409694940714,('133', 1): -29.88978134367823,('133', 2): -29.72707277176531,('200', 0): 5,('200', 2): -49.444213930376236,('201', 0): 2.443092153031169,('202', 2): 1.1600000000000001,('210', 0): -29.307023523493747,('210', 1): 1,('210', 2): -27.185769326069046,('211', 0): -38.434769248378245,('211', 1): -15.247206684186443,('211', 2): -35.84166271278577,('212', 0): -45.118135272086946,('212', 1): -25.43328724105363,('212', 2): -32.050553707587355,('213', 0): 6.847334865004312,('220', 1): -4.1855403066847305,('220', 2): 1.0,('221', 0): -12.972160863243566,('221', 1): -16.348852704798883,('221', 2): -8.130190360445754,('222', 0): 6.439699397862866,('222', 1): -30.79703581059826,('222', 2): 3.5095785755855253,('223', 0): -6.270722788099638,('223', 1): -0.1364292364852897,('223', 2): -11.645008115225453,('231', 0): 5,('232', 2): -0.000801291998785425,('233', 0): 14.745513524917339,('233', 1): -0.43980299545709367,('300', 0): -395.3871393544739,('300', 1): -322.50206836550484,('300', 2): -353.4763491785217,('301', 1): 1.3689600095526968,('302', 1): -52.79903462693368,('302', 2): 1,('310', 0): -220.6606532367498,('310', 1): -205.11893779259867,('310', 2): -119.42354010050794,('311', 0): -53.63119822198156,('311', 1): -48.02000125680596,('311', 2): -56.977288424039365,('312', 2): 1,('320', 2): 1.3545728936343933,('321', 0): -22.16221886255945,('321', 1): -17.04782313520619,('321', 2): -24.917713027658902,('322', 0): 6.085020611704229,('322', 1): 5.090948377793583,('322', 2): -26.440351332739368,('323', 0): 9.702269584431296,('323', 2): -1.8259127339225993,('330', 0): -44.47235916485939,('330', 1): -33.38041008255244,('330', 2): -200,('331', 0): -32.6577926124733,('331', 1): -13.748649796010218,('331', 2): -10.446944364108736,('332', 0): 22.062761105312738,('332', 1): -4.171039604171277,('332', 2): -3.129402272351566,('333', 0): 20.164084023011288,('333', 1): -40.64058875530967,('333', 2): -46.26979156957945}
        # self.q = {('000', 0): -671.6143299633698,('000', 1): -732.297438233536,('000', 2): -727.1023707582373,('001', 0): -649.8464903687293,('001', 1): -675.9435229028742,('001', 2): -682.6539851706499,('002', 0): -550.1256244869992,('002', 1): -516.2013171105023,('002', 2): -533.887395167491,('003', 0): -378.05242667285955,('003', 1): -429.1501930487222,('003', 2): -382.0672685742219,('010', 0): -331.17424695031184,('010', 1): -415.5968139521363,('010', 2): -354.85980610111625,('011', 0): -467.051972020346,('011', 1): -445.1158360414945,('011', 2): -513.5835211369321,('012', 0): -324.1277768785165,('012', 1): -316.35924250985516,('012', 2): -333.68000251376316,('013', 0): -290.46944283644575,('013', 1): -331.3559766266541,('013', 2): -283.30083554268083,('021', 1): -29.537959461808,('021', 2): -15.871182370776015,('022', 0): -162.22416424810243,('022', 1): -239.07156944242047,('022', 2): -148.02426741763628,('023', 0): 5,('023', 1): -17.835038726522495,('031', 0): 5,('032', 2): -39.2,('033', 0): -138.35062303194613,('033', 1): -38.86165795664843,('033', 2): -29.041501682030844,('100', 0): -704.8654591802668,('100', 1): -723.9150476107334,('100', 2): -697.5471697174845,('101', 0): -456.4740877222519,('101', 1): -417.2382504667049,('101', 2): -423.61948241121314,('110', 0): -516.4210109685531,('110', 1): -498.0293251633186,('110', 2): -516.3161087753704,('111', 0): -415.6026683175015,('111', 1): -415.1730069277813,('111', 2): -416.0650946148893,('112', 0): -288.12487224161447,('112', 1): -323.79157774607035,('112', 2): -313.1650208842753,('113', 0): -249.262045545319,('113', 1): -248.16788988698355,('113', 2): -247.2209892244942,('120', 2): 1,('121', 0): -194.43603916520695,('121', 1): -187.67594411989452,('121', 2): -202.46854759814323,('122', 0): -240.48906031334582,('122', 1): -259.7564177939495,('122', 2): -260.0320929101551,('123', 0): -183.4664273732916,('123', 1): -169.5756733299966,('123', 2): -207.01592422741578,('132', 0): -12.148118455479302,('132', 2): -32.17474048305519,('133', 0): -129.864472947421,('133', 1): -122.07893842964705,('133', 2): -111.43954035820532,('200', 0): -376.2664052484051,('200', 1): -376.19105106660624,('200', 2): -392.60337034206185,('201', 0): 2.443092153031169,('202', 2): 1.1600000000000001,('210', 0): -263.39976654627225,('210', 1): -253.86023699042724,('210', 2): -253.4307041897605,('211', 0): -339.354070928385,('211', 1): -295.80367951117637,('211', 2): -388.0707794037904,('212', 0): -78.91608571598273,('212', 1): -89.19873153117922,('212', 2): -77.04684010597528,('213', 0): 6.847334865004312,('220', 0): -320.7421776302325,('220', 1): -335.50029130513906,('220', 2): -346.5253826848143,('221', 0): -278.3655539867393,('221', 1): -259.37671228282363,('221', 2): -232.93113766190302,('222', 0): -244.5149604321221,('222', 1): -223.14884982753887,('222', 2): -235.0961451452346,('223', 0): -186.06339153737875,('223', 1): -199.9361922867754,('223', 2): -176.8672898305224,('231', 0): 5,('231', 1): 1,('232', 0): -84.08613670487071,('232', 1): -72.778875618249,('232', 2): -64.03581218721696,('233', 0): -172.50246674324907,('233', 1): -187.55768890211775,('233', 2): -198.44058542217007,('300', 0): -713.3568770014645,('300', 1): -718.7013187887324,('300', 2): -716.4941905303253,('301', 1): 1.3689600095526968,('302', 1): -52.79903462693368,('302', 2): 1,('310', 0): -643.5237780824746,('310', 1): -583.2886925197698,('310', 2): -603.810305997203,('311', 0): -322.85269709738105,('311', 1): -318.318031860059,('311', 2): -361.96205739397425,('312', 2): 1,('320', 2): -98.36527956842971,('321', 0): -115.40231635825342,('321', 1): -128.5906203623236,('321', 2): -105.44488981735009,('322', 0): -163.140523008405,('322', 1): -177.88220448611898,('322', 2): -173.52391531435373,('323', 0): -4.032660464317146,('323', 1): -24.1326857163486,('323', 2): -1.8259127339225993,('330', 0): -502.2356269023187,('330', 1): -413.9237176421833,('330', 2): -439.9845610566888,('331', 0): -272.07766050945594,('331', 1): -266.0753182661817,('331', 2): -268.8965105405442,('332', 0): -87.809794032443,('332', 1): -139.7656821850395,('332', 2): -126.36664030220544,('333', 0): -97.1667266723329,('333', 1): -113.04590118867544,('333', 2): -101.63327486765739}
        # self.q = {('000', 0): -429.0136874061909,('000', 1): -394.24491300801856,('000', 2): -246.5516481755337,('001', 0): -486.27618029776806,('001', 1): -636.5999488319885,('001', 2): -682.6539851706499,('002', 0): -550.1256244869992,('002', 1): -346.8643257431365,('002', 2): -533.887395167491,('003', 0): -283.58405552279805,('003', 1): -429.1501930487222,('003', 2): -416.6491896572012,('010', 0): -331.17424695031184,('010', 1): -415.5968139521363,('010', 2): -354.85980610111625,('011', 0): -183.37516194907053,('011', 1): -258.5188308288379,('011', 2): -241.26210706272815,('012', 0): -300.52496436138745,('012', 1): -293.1406932770175,('012', 2): -333.68000251376316,('013', 0): -290.46944283644575,('013', 1): -331.3559766266541,('013', 2): -315.4518944337301,('021', 1): -29.537959461808,('021', 2): -15.871182370776015,('022', 0): -169.3719070606909,('022', 1): -195.0815990609524,('022', 2): -52.83556426558042,('023', 0): -27.59507979457695,('023', 1): -16.921637177461594,('023', 2): -28.50556616786872,('031', 0): 5,('032', 2): -39.2,('033', 0): -115.65864565355216,('033', 1): -114.88961013531615,('033', 2): -60.06300049103889,('100', 0): -713.4523284265871,('100', 1): -673.9735857599273,('100', 2): -519.008862424259,('101', 0): -456.4740877222519,('101', 1): -428.98272661856765,('101', 2): -423.61948241121314,('110', 0): -516.4210109685531,('110', 1): -398.8480923823566,('110', 2): -487.0441171567626,('111', 0): -86.92252808905798,('111', 1): -135.2145983471883,('111', 2): -75.78789825952754,('112', 0): -135.37177230699828,('112', 1): -323.79157774607035,('112', 2): -243.16706355297697,('113', 0): -249.262045545319,('113', 1): -216.12709997631833,('113', 2): -137.13730394982176,('120', 2): 1,('121', 0): -194.43603916520695,('121', 1): -208.61950496907681,('121', 2): -202.46854759814323,('122', 0): -121.9266869652511,('122', 1): -122.70479977978974,('122', 2): -66.37427642337238,('123', 0): -183.4664273732916,('123', 1): -169.5756733299966,('123', 2): -207.01592422741578,('132', 0): -12.148118455479302,('132', 2): -32.17474048305519,('133', 0): -55.736433218490404,('133', 1): -146.42145863746666,('133', 2): -121.82832043250428,('200', 0): -376.2664052484051,('200', 1): -376.19105106660624,('200', 2): -392.60337034206185,('201', 0): 2.443092153031169,('202', 2): 1.1600000000000001,('210', 0): -283.91430111274775,('210', 1): -283.45888201472275,('210', 2): -305.8823279725336,('211', 0): -285.933318748847,('211', 1): -176.5186610403191,('211', 2): -282.7545308662794,('212', 0): -78.91608571598273,('212', 1): -89.19873153117922,('212', 2): -77.04684010597528,('213', 0): 6.847334865004312,('220', 0): -265.85640366169264,('220', 1): -335.50029130513906,('220', 2): -346.5253826848143,('221', 0): -278.3655539867393,('221', 1): -273.72905093470393,('221', 2): -79.24703318058884,('222', 0): -60.14769156780838,('222', 1): -45.01786250585798,('222', 2): -64.12442737010966,('223', 0): -186.06339153737875,('223', 1): -188.0477202023039,('223', 2): -147.23618056752653,('231', 0): 5,('231', 1): 1,('232', 0): -84.08613670487071,('232', 1): -72.778875618249,('232', 2): -64.03581218721696,('233', 0): -50.78418200783021,('233', 1): -110.74652008862405,('233', 2): -170.14831573507496,('300', 0): -676.4912247081614,('300', 1): -723.1996509842917,('300', 2): -716.4941905303253,('301', 1): 1.3689600095526968,('302', 1): -52.79903462693368,('302', 2): 1,('310', 0): -562.6310278267666,('310', 1): -403.3073480212057,('310', 2): -437.6845235493396,('311', 0): -327.0400944539152,('311', 1): -219.87431559058476,('311', 2): -304.3206729619827,('312', 2): 1,('320', 2): -98.36527956842971,('321', 0): -130.4996622920871,('321', 1): -61.658391922555516,('321', 2): -130.39586307754564,('322', 0): -80.56886518561055,('322', 1): -188.33509303401544,('322', 2): -146.64118997741892,('323', 0): -4.032660464317146,('323', 1): -24.1326857163486,('323', 2): -1.8259127339225993,('330', 0): -425.24389318655585,('330', 1): -186.7323499882054,('330', 2): -328.020901769286,('331', 0): -61.19868124199685,('331', 1): -15.83440948659697,('331', 2): -66.83503018823083,('332', 0): -23.32224562773268,('332', 1): -53.83672779644863,('332', 2): -45.710906692679224,('333', 0): -29.414074022245398,('333', 1): -26.64674223862834,('333', 2): -64.33949389290711}
        alpha=0.2, gamma=0.8, epsilon=0.25

        self.env = environment.Environment()
        self.epsilon = epsilon  # exploration constant
        self.alpha = alpha      # discount constant
        self.gamma = gamma      # discount factor
        self.actions = range(len(env.action_space)

        self.sess=  tf.Session() 


		tf.reset_default_graph()

		self.input1 = tf.placeholder("string",[None,3])

		# state_action=tf.placeholder("float",[None,4])

		self.W = tf.Variable(tf.random_uniform([3,4],0,0.01))

		self.Qout= tf.matmul(input1,W)
		self.predict = tf.argmax(Qout,1)

		self.state_action = tf.placeholder("float",[None,4])

		self.loss = tf.reduce_sum(tf.square(state_action-Qout))

		self.trainer = tf.train.GradientDescentOptimizer(learning_rate=0.1)
		self.updateModel = trainer.minimize(loss)

		init = tf.initialize_all_vairables()


		jList = []
		rList = []

  

    # The problem with this implementation is that if one action becomes too good , that it will always stay better
    def chooseAction(self, stateX, return_q=False):
        self.sess.run(init)
	# for i in range(num_episodes):
	# 	rAll = 0
	# 	d = False
		
		stateX = [int(i) for i in state]
		a,allQ = self.sess.run([self.predict,self.Qout],feed_dict={inputs1:stateX})
        if np.random.rand(1) < self.epsilon:
            a[0] = random.randrange(3)
        #Get new input1 and reward from environment
        # observation, reward, done, info = env.step(action)
        st,r,d,_ = self.env.step(a[0])
        #Obtain the Q' values by feeding the new input1 through our network

        
        Q1 = self.sess.run(self.Qout,feed_dict={inputs1:st})
        #Obtain maxQ' and set our target value for chosen action.
        maxQ1 = np.max(Q1)
        targetQ = allQ
        targetQ[0,a[0]] = r + self.gamma*maxQ1
        #Train our network using target and predicted Q values
        _,W1 = self.sess.run([self.updateModel,self.W],feed_dict={inputs1:stateX,nextQ:targetQ})
        # rAll += r
     
        # jList.append(j)
        # rList.append(rAll)
        return st,r,a[0],d

